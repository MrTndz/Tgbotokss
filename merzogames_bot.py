import asyncio
import hashlib
import json
import logging
import os
import re
import sqlite3
from datetime import datetime, timedelta, timezone
from typing import Optional, Dict, List, Any, Tuple
from dataclasses import dataclass, asdict
from contextlib import asynccontextmanager

from aiogram import Bot, Dispatcher, F, Router
from aiogram.filters import Command, StateFilter
from aiogram.fsm.context import FSMContext
from aiogram.fsm.state import State, StatesGroup
from aiogram.fsm.storage.memory import MemoryStorage
from aiogram.types import (
    Message,
    CallbackQuery,
    InlineKeyboardMarkup,
    InlineKeyboardButton,
    ReplyKeyboardMarkup,
    KeyboardButton,
    ReplyKeyboardRemove,
    WebAppInfo,
    InlineQueryResultArticle,
    InputTextMessageContent,
    InlineQuery
)
from aiogram.utils.keyboard import InlineKeyboardBuilder, ReplyKeyboardBuilder
from aiogram.filters.callback_data import CallbackData

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

BOT_TOKEN = "8296802832:AAEU4oF4v5bjKP3KTb1rRx1Oxf-Z1dng9QQ"
ADMIN_USERNAME = "mrztn"
ADMIN_ID = 7785371505
BOT_LINK = "https://t.me/mrztnbot"
WEBAPP_LINK = "https://makfje.pages.dev/"

DB_PATH = "merzogames.db"
LOG_PATH = "bot.log"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s | %(levelname)-8s | %(name)s | %(message)s',
    handlers=[
        logging.FileHandler(LOG_PATH, encoding='utf-8'),
        logging.StreamHandler()
    ]
)
logger = logging.getLogger(__name__)

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ú–ù–û–ì–û–Ø–ó–´–ß–ù–û–°–¢–¨
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

TEXTS = {
    "ru": {
        "start_welcome": (
            "üéÆ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ MERZOGAMES!</b>\n\n"
            "–≠—Ç–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π. "
            "–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥—ë—Ç–µ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏–≥—Ä—ã, —Ç—É—Ä–Ω–∏—Ä—ã –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤.\n\n"
            "‚ö†Ô∏è <b>–í–ê–ñ–ù–û:</b> –í—Å–µ –∏–≥—Ä—ã –Ω–æ—Å—è—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ <u>—Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</u>. "
            "–í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞, –æ—á–∫–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è <b>–Ω–µ –∏–º–µ—é—Ç —Ä–µ–∞–ª—å–Ω–æ–π –¥–µ–Ω–µ–∂–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏</b> "
            "–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±–º–µ–Ω–µ–Ω—ã –Ω–∞ –¥–µ–Ω—å–≥–∏ –∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–µ —Ü–µ–Ω–Ω–æ—Å—Ç–∏.\n\n"
            "–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏:"
        ),
        "btn_policy": "üìú –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
        "btn_terms": "üìò –£—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
        "btn_accept": "‚úÖ –ü—Ä–∏–Ω—è—Ç—å",
        "btn_decline": "‚ùå –û—Ç–∫–∞–∑–∞—Ç—å—Å—è",
        "btn_back": "‚óÄÔ∏è –ù–∞–∑–∞–¥",
        "policy_title": "üìú <b>–ü–û–õ–ò–¢–ò–ö–ê –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–û–°–¢–ò MERZOGAMES</b>",
        "policy_text": (
            "\n\n<b>1. –û–ë–©–ò–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø</b>\n"
            "–ù–∞—Å—Ç–æ—è—â–∞—è –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∑–∞—â–∏—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö "
            "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã MERZOGAMES (–¥–∞–ª–µ–µ ‚Äî ¬´–°–µ—Ä–≤–∏—Å¬ª).\n\n"
            
            "<b>2. –†–ê–ó–í–õ–ï–ö–ê–¢–ï–õ–¨–ù–´–ô –•–ê–†–ê–ö–¢–ï–†</b>\n"
            "2.1. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏–≥—Ä—ã –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.\n"
            "2.2. –í—Å–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –æ—á–∫–∏, –≤–∞–ª—é—Ç–∞, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –±–æ–Ω—É—Å—ã –ù–ï –ò–ú–ï–Æ–¢ —Ä–µ–∞–ª—å–Ω–æ–π –¥–µ–Ω–µ–∂–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏.\n"
            "2.3. –°–µ—Ä–≤–∏—Å –ù–ï –Ø–í–õ–Ø–ï–¢–°–Ø –∞–∑–∞—Ä—Ç–Ω–æ–π –∏–≥—Ä–æ–π –∏ –Ω–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—ã–ø–ª–∞—Ç, –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ –∏–ª–∏ –æ–±–º–µ–Ω–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏.\n"
            "2.4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –°–µ—Ä–≤–∏—Å–∞ –Ω–æ—Å–∏—Ç –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.\n\n"
            
            "<b>3. –°–û–ë–ò–†–ê–ï–ú–´–ï –î–ê–ù–ù–´–ï</b>\n"
            "3.1. Telegram ID (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)\n"
            "3.2. –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (username)\n"
            "3.3. –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)\n"
            "3.4. –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\n"
            "3.5. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å\n"
            "3.6. –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞ (–∫–æ–º–∞–Ω–¥—ã, –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–æ–∫)\n\n"
            
            "<b>4. –¶–ï–õ–ò –û–ë–†–ê–ë–û–¢–ö–ò –î–ê–ù–ù–´–•</b>\n"
            "4.1. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –°–µ—Ä–≤–∏—Å—É\n"
            "4.2. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–∞ –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π (–º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã)\n"
            "4.3. –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ø–∞–º–∞\n"
            "4.4. –£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞\n"
            "4.5. –†–∞—Å—Å—ã–ª–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–ø–∏—Å–∫–∏)\n"
            "4.6. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤\n\n"
            
            "<b>5. –•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•</b>\n"
            "5.1. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö –°–µ—Ä–≤–∏—Å–∞.\n"
            "5.2. –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –∑–∞—â–∏—Ç—ã.\n"
            "5.3. –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –∏–º–µ—é—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã.\n"
            "5.4. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∞–Ω–æ–Ω–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π.\n\n"
            
            "<b>6. –ü–ï–†–ï–î–ê–ß–ê –î–ê–ù–ù–´–• –¢–†–ï–¢–¨–ò–ú –õ–ò–¶–ê–ú</b>\n"
            "6.1. –î–∞–Ω–Ω—ã–µ –ù–ï –ü–†–û–î–ê–Æ–¢–°–Ø –∏ –ù–ï –ü–ï–†–ï–î–ê–Æ–¢–°–Ø —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö.\n"
            "6.2. –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω—ã –ø–æ –∑–∞–ø—Ä–æ—Å—É —É–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω—ã—Ö –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤.\n"
            "6.3. Telegram API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π Telegram.\n\n"
            
            "<b>7. –ü–†–ê–í–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (GDPR)</b>\n"
            "7.1. –ü—Ä–∞–≤–æ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º (–∫–æ–º–∞–Ω–¥–∞ /export_my_data)\n"
            "7.2. –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ (–∫–æ–º–∞–Ω–¥–∞ /delete_account)\n"
            "7.3. –ü—Ä–∞–≤–æ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n"
            "7.4. –ü—Ä–∞–≤–æ –Ω–∞ –æ—Ç–∑—ã–≤ —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö (—É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞)\n\n"
            
            "<b>8. –í–û–ó–†–ê–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø</b>\n"
            "8.1. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ª–∏—Ü —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç.\n"
            "8.2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö –ó–ê–ü–†–ï–©–ï–ù–ê.\n"
            "8.3. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.\n\n"
            
            "<b>9. –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨</b>\n"
            "9.1. –°–µ—Ä–≤–∏—Å –ù–ï –ù–ï–°–Å–¢ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.\n"
            "9.2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ—Å—ë—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å —Å–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞.\n"
            "9.3. –°–µ—Ä–≤–∏—Å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—É—é —Ä–∞–±–æ—Ç—É –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤.\n\n"
            
            "<b>10. –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–û–õ–ò–¢–ò–ö–ò</b>\n"
            "10.1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ –∏–∑–º–µ–Ω—è—Ç—å –ü–æ–ª–∏—Ç–∏–∫—É –≤ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ø–æ—Ä—è–¥–∫–µ.\n"
            "10.2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ –±–æ—Ç–µ.\n"
            "10.3. –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –°–µ—Ä–≤–∏—Å–∞ –æ–∑–Ω–∞—á–∞–µ—Ç —Å–æ–≥–ª–∞—Å–∏–µ —Å –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π –ü–æ–ª–∏—Ç–∏–∫–∏.\n\n"
            
            "<b>11. –ö–û–ù–¢–ê–ö–¢–´</b>\n"
            "–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö: @mrztn\n"
            "–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 27.02.2026"
        ),
        "terms_title": "üìò <b>–£–°–õ–û–í–ò–Ø –ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø MERZOGAMES</b>",
        "terms_text": (
            "\n\n<b>1. –ü–†–ï–î–ú–ï–¢ –°–û–ì–õ–ê–®–ï–ù–ò–Ø</b>\n"
            "1.1. –ù–∞—Å—Ç–æ—è—â–∏–µ –£—Å–ª–æ–≤–∏—è —Ä–µ–≥—É–ª–∏—Ä—É—é—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π MERZOGAMES (–¥–∞–ª–µ–µ ‚Äî ¬´–°–µ—Ä–≤–∏—Å¬ª) "
            "–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–¥–∞–ª–µ–µ ‚Äî ¬´–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å¬ª) –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Telegram-–±–æ—Ç–∞ –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.\n"
            "1.2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –°–µ—Ä–≤–∏—Å–µ –æ–∑–Ω–∞—á–∞–µ—Ç –ü–û–õ–ù–û–ï –ò –ë–ï–ó–û–ì–û–í–û–†–û–ß–ù–û–ï –ø—Ä–∏–Ω—è—Ç–∏–µ –Ω–∞—Å—Ç–æ—è—â–∏—Ö –£—Å–ª–æ–≤–∏–π.\n\n"
            
            "<b>2. –†–ê–ó–í–õ–ï–ö–ê–¢–ï–õ–¨–ù–´–ô –•–ê–†–ê–ö–¢–ï–†</b>\n"
            "2.1. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ò–°–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–û —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫.\n"
            "2.2. –í—Å–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –≤–∞–ª—é—Ç–∞, –æ—á–∫–∏, –±–æ–Ω—É—Å—ã –ù–ï –ò–ú–ï–Æ–¢ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏.\n"
            "2.3. –ó–ê–ü–†–ï–©–ï–ù–´ –ª—é–±—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ–±–º–µ–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏.\n"
            "2.4. –°–µ—Ä–≤–∏—Å –ù–ï –Ø–í–õ–Ø–ï–¢–°–Ø –∞–∑–∞—Ä—Ç–Ω–æ–π –∏–≥—Ä–æ–π –ø–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–§ –∏ –¥—Ä—É–≥–∏—Ö —é—Ä–∏—Å–¥–∏–∫—Ü–∏–π.\n\n"
            
            "<b>3. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ò –ê–ö–ö–ê–£–ù–¢</b>\n"
            "3.1. –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –û–î–ò–ù –∞–∫–∫–∞—É–Ω—Ç. –°–æ–∑–¥–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤ –°–¢–†–û–ì–û –ó–ê–ü–†–ï–©–ï–ù–û.\n"
            "3.2. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞ –¢–û–õ–¨–ö–û —Å –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞.\n"
            "3.3. –ü–µ—Ä–µ–¥–∞—á–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º –ó–ê–ü–†–ï–©–ï–ù–ê.\n"
            "3.4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—è–∑–∞–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.\n"
            "3.5. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ª–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.\n\n"
            
            "<b>4. –í–û–ó–†–ê–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø</b>\n"
            "4.1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –°–µ—Ä–≤–∏—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –ª–∏—Ü–∞–º —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç.\n"
            "4.2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –µ–º—É –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å 18 –ª–µ—Ç –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.\n"
            "4.3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞.\n"
            "4.4. –ù–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã —É–¥–∞–ª—è—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –±–µ–∑ –ø—Ä–∞–≤–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.\n\n"
            
            "<b>5. –ó–ê–ü–†–ï–©–Å–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø</b>\n"
            "5.1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–æ–≤, —Å–∫—Ä–∏–ø—Ç–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏\n"
            "5.2. –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –±–∞–≥–æ–≤ –∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π\n"
            "5.3. –°–æ–∑–¥–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤\n"
            "5.4. –°–ø–∞–º, —Ñ–ª—É–¥, –º–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞\n"
            "5.5. –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —É–≥—Ä–æ–∑—ã, –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ü–∏—è\n"
            "5.6. –ü–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞ –∏–ª–∏ DDoS-–∞—Ç–∞–∫–∏\n"
            "5.7. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —á—É–∂–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n"
            "5.8. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞\n"
            "5.9. –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ –∏ –≤–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ\n"
            "5.10. –õ—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –Ω–∞—Ä—É—à–∞—é—â–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ\n\n"
            
            "<b>6. –°–ê–ù–ö–¶–ò–ò</b>\n"
            "6.1. –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –£—Å–ª–æ–≤–∏–π –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ:\n"
            "   ‚Ä¢ –í—ã–Ω–µ—Å—Ç–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ\n"
            "   ‚Ä¢ –í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç (–æ—Ç 1 —á–∞—Å–∞ –¥–æ 30 –¥–Ω–µ–π)\n"
            "   ‚Ä¢ –ù–∞–≤—Å–µ–≥–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –±–µ–∑ –ø—Ä–∞–≤–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è\n"
            "   ‚Ä¢ –û–±–Ω—É–ª–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤—ã\n"
            "6.2. –†–µ—à–µ–Ω–∏–µ –æ —Å–∞–Ω–∫—Ü–∏—è—Ö –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –µ–¥–∏–Ω–æ–ª–∏—á–Ω–æ –∏ –æ–±–∂–∞–ª–æ–≤–∞–Ω–∏—é –Ω–µ –ø–æ–¥–ª–µ–∂–∏—Ç.\n"
            "6.3. –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ù–ï –ò–ú–ï–Æ–¢ –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—é.\n\n"
            
            "<b>7. –û–¢–ö–ê–ó –û–¢ –ì–ê–†–ê–ù–¢–ò–ô</b>\n"
            "7.1. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è ¬´–ö–ê–ö –ï–°–¢–¨¬ª (AS IS) –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π.\n"
            "7.2. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –ù–ï –ì–ê–†–ê–ù–¢–ò–†–£–ï–¢:\n"
            "   ‚Ä¢ –ë–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—É—é —Ä–∞–±–æ—Ç—É\n"
            "   ‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫\n"
            "   ‚Ä¢ –°–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n"
            "   ‚Ä¢ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è\n"
            "7.3. –°–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω—ë–Ω, –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –ø—Ä–µ–∫—Ä–∞—â—ë–Ω –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç.\n\n"
            
            "<b>8. –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–ò</b>\n"
            "8.1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –ù–ï –ù–ï–°–Å–¢ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞:\n"
            "   ‚Ä¢ –ü–æ—Ç–µ—Ä—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n"
            "   ‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–±–æ–∏\n"
            "   ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü\n"
            "   ‚Ä¢ –ö–æ—Å–≤–µ–Ω–Ω—ã–µ —É–±—ã—Ç–∫–∏\n"
            "8.2. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏: 0 (–Ω–æ–ª—å) —Ä—É–±–ª–µ–π.\n"
            "8.3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –°–µ—Ä–≤–∏—Å –ù–ê –°–í–û–ô –†–ò–°–ö.\n\n"
            
            "<b>9. –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–ê–Ø –°–û–ë–°–¢–í–ï–ù–ù–û–°–¢–¨</b>\n"
            "9.1. –í—Å–µ –ø—Ä–∞–≤–∞ –Ω–∞ –°–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.\n"
            "9.2. –ó–ê–ü–†–ï–©–ï–ù–û –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ, –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.\n"
            "9.3. –õ–æ–≥–æ—Ç–∏–ø—ã, —Ç–µ–∫—Å—Ç—ã, –≥—Ä–∞—Ñ–∏–∫–∞ –∑–∞—â–∏—â–µ–Ω—ã –∞–≤—Ç–æ—Ä—Å–∫–∏–º –ø—Ä–∞–≤–æ–º.\n\n"
            
            "<b>10. –ò–ó–ú–ï–ù–ï–ù–ò–ï –£–°–õ–û–í–ò–ô</b>\n"
            "10.1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ –∏–∑–º–µ–Ω—è—Ç—å –£—Å–ª–æ–≤–∏—è –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.\n"
            "10.2. –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Å–∏–ª—É —Å –º–æ–º–µ–Ω—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.\n"
            "10.3. –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è = —Å–æ–≥–ª–∞—Å–∏–µ —Å –Ω–æ–≤—ã–º–∏ –£—Å–ª–æ–≤–∏—è–º–∏.\n\n"
            
            "<b>11. –ü–†–ò–ú–ï–ù–ò–ú–û–ï –ü–†–ê–í–û</b>\n"
            "11.1. –ö –Ω–∞—Å—Ç–æ—è—â–∏–º –£—Å–ª–æ–≤–∏—è–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏.\n"
            "11.2. –°–ø–æ—Ä—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–§.\n\n"
            
            "<b>12. –ó–ê–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–´–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø</b>\n"
            "12.1. –£—Å–ª–æ–≤–∏—è —è–≤–ª—è—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç–æ–π.\n"
            "12.2. –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –Ω–µ –≤–ª–µ—á—ë—Ç –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.\n"
            "12.3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –æ—Ç–∫–∞–∑–∞—Ç—å –≤ –¥–æ—Å—Ç—É–ø–µ –ª—é–±–æ–º—É –ª–∏—Ü—É –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω.\n\n"
            
            "<b>–ö–û–ù–¢–ê–ö–¢–´:</b> @mrztn\n"
            "<b>–í–µ—Ä—Å–∏—è:</b> 1.0 –æ—Ç 27.02.2026"
        ),
        "policy_accepted": "‚úÖ –í—ã –ø—Ä–∏–Ω—è–ª–∏ –ü–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏.",
        "terms_accepted": "‚úÖ –í—ã –ø—Ä–∏–Ω—è–ª–∏ –£—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.",
        "declined_message": (
            "‚ùå –í—ã –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç –ø—Ä–∏–Ω—è—Ç–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.\n\n"
            "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è —Å –ü–æ–ª–∏—Ç–∏–∫–æ–π –∏ –£—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.\n\n"
            "–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—Ç–µ, –Ω–∞–ø–∏—à–∏—Ç–µ /start"
        ),
        "age_verification": (
            "üîû <b>–ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –í–û–ó–†–ê–°–¢–ê</b>\n\n"
            "–í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –∏ —É—Å–ª–æ–≤–∏—è–º–∏ —Å–µ—Ä–≤–∏—Å–∞, "
            "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MERZOGAMES —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ª–∏—Ü–∞–º —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç.\n\n"
            "‚ùì <b>–í–∞–º –∏—Å–ø–æ–ª–Ω–∏–ª–æ—Å—å 18 –ª–µ—Ç?</b>"
        ),
        "btn_age_yes": "‚úÖ –î–∞, –º–Ω–µ –µ—Å—Ç—å 18 –ª–µ—Ç",
        "btn_age_no": "‚ùå –ù–µ—Ç, –º–Ω–µ –Ω–µ—Ç 18 –ª–µ—Ç",
        "age_declined": (
            "‚õîÔ∏è <b>–î–û–°–¢–£–ü –ó–ê–ü–†–ï–©–Å–ù</b>\n\n"
            "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MERZOGAMES —Ä–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ª–∏—Ü–∞–º —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç.\n\n"
            "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –∫–æ–≥–¥–∞ –≤–∞–º –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è 18! üëã"
        ),
        "age_confirmed": "‚úÖ –í–æ–∑—Ä–∞—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω. –°–ø–∞—Å–∏–±–æ!",
        "registration_phone": (
            "üì± <b>–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</b>\n\n"
            "–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.\n\n"
            "‚ö†Ô∏è –≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è:\n"
            "‚Ä¢ –ó–∞—â–∏—Ç—ã –æ—Ç –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤\n"
            "‚Ä¢ –û–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n"
            "‚Ä¢ –°–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª —Å–µ—Ä–≤–∏—Å–∞\n\n"
            "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä."
        ),
        "btn_send_phone": "üì± –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞",
        "registration_success": (
            "üéâ <b>–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨ –í MERZOGAMES!</b>\n\n"
            "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –Ω–∞ –Ω–∞—à–µ–π —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.\n\n"
            "–¢–µ–ø–µ—Ä—å –≤–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã:\n"
            "üéÆ –£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏–≥—Ä—ã\n"
            "üèÜ –¢—É—Ä–Ω–∏—Ä—ã –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è\n"
            "üë• –°–æ–æ–±—â–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤\n"
            "üéÅ –†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã\n\n"
            "–ü–æ–º–Ω–∏—Ç–µ: –≤—Å–µ –∏–≥—Ä—ã –Ω–æ—Å—è—Ç <b>–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä</b> "
            "–∏ –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–∂–Ω—ã—Ö –≤—ã–∏–≥—Ä—ã—à–µ–π.\n\n"
            "–ñ–µ–ª–∞–µ–º —á–µ—Å—Ç–Ω–æ–π –∏–≥—Ä—ã, –æ—Ç–ª–∏—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —è—Ä–∫–∏—Ö —ç–º–æ—Ü–∏–π! üöÄ\n\n"
            "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –Ω–∏–∂–µ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏."
        ),
        "btn_open_webapp": "üåê –û—Ç–∫—Ä—ã—Ç—å MERZOGAMES",
        "btn_profile": "üë§ –ü—Ä–æ—Ñ–∏–ª—å",
        "btn_info": "‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",
        "btn_referral": "üîó –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞",
        "btn_export_data": "üì• –≠–∫—Å–ø–æ—Ä—Ç –º–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö",
        "btn_delete_account": "üóë –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç",
        "btn_language": "üåê –Ø–∑—ã–∫",
        "profile_text": (
            "üë§ <b>–í–ê–® –ü–†–û–§–ò–õ–¨</b>\n\n"
            "üÜî Telegram ID: {telegram_id}\n"
            "üë§ Username: @{username}\n"
            "üì± –¢–µ–ª–µ—Ñ–æ–Ω: {phone}\n"
            "üìÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: {registration_date}\n"
            "üåç –Ø–∑—ã–∫: {language}\n"
            "üéñ –°—Ç–∞—Ç—É—Å: {status}\n\n"
            "{badges}"
        ),
        "info_text": (
            "‚ÑπÔ∏è <b>–ò–ù–§–û–†–ú–ê–¶–ò–Ø –û MERZOGAMES</b>\n\n"
            "<b>–ß—Ç–æ —ç—Ç–æ?</b>\n"
            "MERZOGAMES ‚Äî —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä, —Ç—É—Ä–Ω–∏—Ä–æ–≤ –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π.\n\n"
            "<b>–í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å:</b>\n"
            "‚Ä¢ –í—Å–µ –∏–≥—Ä—ã –Ω–æ—Å—è—Ç —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä\n"
            "‚Ä¢ –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞ –Ω–µ –∏–º–µ–µ—Ç –¥–µ–Ω–µ–∂–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏\n"
            "‚Ä¢ –ó–∞–ø—Ä–µ—â–µ–Ω—ã –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç—ã –∏ —á–∏—Ç–µ—Ä—Å—Ç–≤–æ\n"
            "‚Ä¢ –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏—Ü 18+\n\n"
            "<b>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n"
            "üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: @mrztn\n"
            "ü§ñ –ë–æ—Ç: {bot_link}\n"
            "üåê WebApp: {webapp_link}\n\n"
            "<b>–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
            "/start - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é\n"
            "/profile - –ü—Ä–æ—Ñ–∏–ª—å\n"
            "/referral - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞\n"
            "/export_my_data - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö\n"
            "/delete_account - –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞\n"
            "/language - –°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫"
        ),
        "referral_text": (
            "üîó <b>–í–ê–®–ê –†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–°–´–õ–ö–ê</b>\n\n"
            "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π –≤ MERZOGAMES!\n\n"
            "–í–∞—à–∞ —Å—Å—ã–ª–∫–∞:\n"
            "<code>{referral_link}</code>\n\n"
            "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n"
            "–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: {referrals_count} —á–µ–ª.\n\n"
            "‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä "
            "–∏ –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç."
        ),
        "export_data_text": (
            "üì• <b>–≠–ö–°–ü–û–†–¢ –î–ê–ù–ù–´–• (GDPR)</b>\n\n"
            "–í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–æ–º –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º, "
            "–º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —Ö—Ä–∞–Ω—è—â–∏–º–∏—Å—è –≤ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ.\n\n"
            "üìÑ –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç:\n"
            "‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ\n"
            "‚Ä¢ –ò—Å—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏\n"
            "‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n"
            "‚Ä¢ –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π (–æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–µ)\n\n"
            "–§–∞–π–ª –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç—ã."
        ),
        "delete_account_confirm": (
            "üóë <b>–£–î–ê–õ–ï–ù–ò–ï –ê–ö–ö–ê–£–ù–¢–ê</b>\n\n"
            "‚ö†Ô∏è <b>–í–ù–ò–ú–ê–ù–ò–ï!</b> –≠—Ç–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ.\n\n"
            "–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è:\n"
            "‚ùå –ë—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ\n"
            "‚ùå –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω\n"
            "‚ùå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ\n\n"
            "–û–¥–Ω–∞–∫–æ —É –≤–∞—Å –±—É–¥–µ—Ç <b>7 –¥–Ω–µ–π</b> –Ω–∞ –æ—Ç–º–µ–Ω—É —É–¥–∞–ª–µ–Ω–∏—è.\n"
            "–í —Ç–µ—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∞–∫–∫–∞—É–Ω—Ç –±—É–¥–µ—Ç –∑–∞–º–æ—Ä–æ–∂–µ–Ω, –Ω–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è.\n\n"
            "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?"
        ),
        "btn_delete_confirm": "üóë –î–∞, —É–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞",
        "btn_cancel": "‚ùå –û—Ç–º–µ–Ω–∞",
        "delete_account_scheduled": (
            "‚è≥ <b>–ê–ö–ö–ê–£–ù–¢ –ü–û–ú–ï–ß–ï–ù –ù–ê –£–î–ê–õ–ï–ù–ò–ï</b>\n\n"
            "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π.\n\n"
            "–î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ, –Ω–∞–ø–∏—Å–∞–≤ /cancel_deletion\n\n"
            "–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è: {deletion_date}"
        ),
        "admin_new_user": (
            "üÜï <b>–ù–û–í–´–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨</b>\n\n"
            "üë§ –ü—Ä–æ—Ñ–∏–ª—å: <a href='tg://user?id={telegram_id}'>—Å—Å—ã–ª–∫–∞</a>\n"
            "üÜî ID: <code>{telegram_id}</code>\n"
            "üë§ Username: @{username}\n"
            "üì± –¢–µ–ª–µ—Ñ–æ–Ω: <code>{phone}</code>\n"
            "üìÖ –î–∞—Ç–∞: {registration_date}\n"
            "üåç –Ø–∑—ã–∫: {language}"
        ),
        "admin_duplicate_attempt": (
            "‚ö†Ô∏è <b>–ü–û–ü–´–¢–ö–ê –ú–£–õ–¨–¢–ò–ê–ö–ö–ê–£–ù–¢–ê!</b>\n\n"
            "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –∞–∫–∫–∞—É–Ω—Ç:\n\n"
            "üÜî –ù–æ–≤—ã–π ID: <code>{new_id}</code>\n"
            "üì± –ù–æ–º–µ—Ä: <code>{phone}</code>\n"
            "üîó –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π ID: <code>{existing_id}</code>\n"
            "üë§ Username: @{username}"
        ),
        "duplicate_phone_error": (
            "‚õîÔ∏è <b>–û–®–ò–ë–ö–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò</b>\n\n"
            "–≠—Ç–æ—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ.\n\n"
            "–°–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∞–≤–∏–ª–∞–º, –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç.\n\n"
            "–ï—Å–ª–∏ –≤—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: @mrztn"
        ),
        "rate_limit_warning": (
            "‚ö†Ô∏è –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥. –ü–æ–¥–æ–∂–¥–∏—Ç–µ {seconds} —Å–µ–∫—É–Ω–¥."
        ),
        "flood_blocked": (
            "üö´ <b>–ê–ù–¢–ò–°–ü–ê–ú</b>\n\n"
            "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ñ–ª—É–¥).\n"
            "–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞ {minutes} –º–∏–Ω—É—Ç.\n\n"
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ—Ç –≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö."
        ),
        "language_select": "üåê –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Select language:",
        "btn_lang_ru": "üá∑üá∫ –†—É—Å—Å–∫–∏–π",
        "btn_lang_en": "üá¨üáß English",
        "language_changed": "‚úÖ –Ø–∑—ã–∫ –∏–∑–º–µ–Ω—ë–Ω –Ω–∞: {language}"
    },
    "en": {
        "start_welcome": (
            "üéÆ <b>Welcome to MERZOGAMES!</b>\n\n"
            "This is an entertainment platform for fans of interactive games and competitions. "
            "Here you'll find exciting games, tournaments, and a community of like-minded people.\n\n"
            "‚ö†Ô∏è <b>IMPORTANT:</b> All games are <u>purely entertainment</u>. "
            "Virtual currency, points, and achievements <b>have no real monetary value</b> "
            "and cannot be exchanged for money or material assets.\n\n"
            "Before using, please review the documents:"
        ),
        "btn_policy": "üìú Privacy Policy",
        "btn_terms": "üìò Terms of Service",
        "btn_accept": "‚úÖ Accept",
        "btn_decline": "‚ùå Decline",
        "btn_back": "‚óÄÔ∏è Back",
        "policy_title": "üìú <b>MERZOGAMES PRIVACY POLICY</b>",
        "policy_text": (
            "\n\n<b>1. GENERAL PROVISIONS</b>\n"
            "This Privacy Policy governs the processing and protection of personal data "
            "of MERZOGAMES entertainment platform users (hereinafter - 'Service').\n\n"
            
            "<b>2. ENTERTAINMENT NATURE</b>\n"
            "2.1. Service provides exclusively entertainment games and activities.\n"
            "2.2. All virtual items, points, currency, achievements DO NOT HAVE real monetary value.\n"
            "2.3. Service IS NOT gambling and does not provide payouts or withdrawals.\n"
            "2.4. Using Service is voluntary and at your own risk.\n\n"
            
            "<b>3. COLLECTED DATA</b>\n"
            "3.1. Telegram ID (unique identifier)\n"
            "3.2. Username\n"
            "3.3. Phone number (for verification)\n"
            "3.4. Registration date and time\n"
            "3.5. Technical info: language, timezone\n"
            "3.6. Activity logs (commands, button clicks)\n\n"
            
            "<b>4. DATA PROCESSING PURPOSES</b>\n"
            "4.1. User identification and service access\n"
            "4.2. Fraud prevention (multi-accounting)\n"
            "4.3. Security and anti-spam\n"
            "4.4. Service improvement\n"
            "4.5. Informational newsletters\n"
            "4.6. Legal compliance\n\n"
            
            "<b>5. DATA STORAGE</b>\n"
            "5.1. Data stored in secure database.\n"
            "5.2. Modern encryption applied.\n"
            "5.3. Access limited to authorized admins.\n"
            "5.4. Deleted accounts anonymized after 7 days.\n\n"
            
            "<b>6. DATA SHARING</b>\n"
            "6.1. Data NOT SOLD or shared commercially.\n"
            "6.2. May be disclosed to authorities by legal request.\n\n"
            
            "<b>7. USER RIGHTS (GDPR)</b>\n"
            "7.1. Right to access data (/export_my_data)\n"
            "7.2. Right to delete account (/delete_account)\n"
            "7.3. Right to correct data\n"
            "7.4. Right to withdraw consent\n\n"
            
            "<b>8. AGE RESTRICTIONS</b>\n"
            "8.1. Service for 18+ only.\n"
            "8.2. Minors registration PROHIBITED.\n\n"
            
            "<b>9. LIABILITY</b>\n"
            "9.1. Service NOT LIABLE for user actions.\n"
            "9.2. No uptime guarantees.\n\n"
            
            "<b>10. POLICY CHANGES</b>\n"
            "10.1. Administration may change Policy unilaterally.\n\n"
            
            "<b>11. CONTACT</b>\n"
            "Data questions: @mrztn\n"
            "Last updated: 2026-02-27"
        ),
        "terms_title": "üìò <b>MERZOGAMES TERMS OF SERVICE</b>",
        "terms_text": (
            "\n\n<b>1. AGREEMENT</b>\n"
            "These Terms govern relationships between MERZOGAMES Administration and Users.\n"
            "Registration means FULL ACCEPTANCE of these Terms.\n\n"
            
            "<b>2. ENTERTAINMENT NATURE</b>\n"
            "2.1. Service provides EXCLUSIVELY entertainment without real money betting.\n"
            "2.2. Virtual items have NO real value.\n"
            "2.3. NOT gambling.\n\n"
            
            "<b>3. REGISTRATION</b>\n"
            "3.1. One user = ONE account. Multi-accounting STRICTLY PROHIBITED.\n"
            "3.2. Phone verification required.\n"
            "3.3. Account transfer PROHIBITED.\n\n"
            
            "<b>4. AGE RESTRICTIONS</b>\n"
            "4.1. 18+ only.\n"
            "4.2. User confirms being 18+.\n\n"
            
            "<b>5. PROHIBITED ACTIONS</b>\n"
            "5.1. Bots, scripts, automation\n"
            "5.2. Bug exploitation\n"
            "5.3. Multi-accounting\n"
            "5.4. Spam, flood\n"
            "5.5. Harassment\n"
            "5.6. Hacking attempts\n\n"
            
            "<b>6. SANCTIONS</b>\n"
            "6.1. Warning, temp ban, permanent ban.\n"
            "6.2. No compensation for banned users.\n\n"
            
            "<b>7. DISCLAIMER</b>\n"
            "7.1. Service AS IS.\n"
            "7.2. No guarantees.\n\n"
            
            "<b>8. LIMITATION OF LIABILITY</b>\n"
            "8.1. Administration NOT LIABLE.\n"
            "8.2. Use at your own risk.\n\n"
            
            "<b>CONTACT:</b> @mrztn\n"
            "<b>Version:</b> 1.0 - 2026-02-27"
        ),
        "policy_accepted": "‚úÖ You accepted Privacy Policy.",
        "terms_accepted": "‚úÖ You accepted Terms of Service.",
        "declined_message": (
            "‚ùå You declined required documents.\n\n"
            "Without accepting Policy and Terms, bot usage is impossible.\n\n"
            "If you change your mind, type /start"
        ),
        "age_verification": (
            "üîû <b>AGE VERIFICATION</b>\n\n"
            "MERZOGAMES is allowed only for persons 18+.\n\n"
            "‚ùì <b>Are you 18 years old or older?</b>"
        ),
        "btn_age_yes": "‚úÖ Yes, I'm 18+",
        "btn_age_no": "‚ùå No, I'm under 18",
        "age_declined": (
            "‚õîÔ∏è <b>ACCESS DENIED</b>\n\n"
            "Sorry, MERZOGAMES is for 18+ only.\n\n"
            "Your account is blocked. Come back when you're 18! üëã"
        ),
        "age_confirmed": "‚úÖ Age confirmed. Thank you!",
        "registration_phone": (
            "üì± <b>REGISTRATION</b>\n\n"
            "Please share your phone number to complete registration.\n\n"
            "‚ö†Ô∏è This is needed for:\n"
            "‚Ä¢ Multi-account protection\n"
            "‚Ä¢ Security\n"
            "‚Ä¢ Rules compliance\n\n"
            "Tap button below to send your number."
        ),
        "btn_send_phone": "üì± Send Phone Number",
        "registration_success": (
            "üéâ <b>WELCOME TO MERZOGAMES!</b>\n\n"
            "Congrats! You've successfully registered on our entertainment platform.\n\n"
            "Now available:\n"
            "üéÆ Exciting games\n"
            "üèÜ Tournaments\n"
            "üë• Community\n"
            "üéÅ Entertainment bonuses\n\n"
            "Remember: all games are <b>purely entertainment</b> "
            "with no real money prizes.\n\n"
            "We wish you fair play, great mood and bright emotions! üöÄ\n\n"
            "Use menu below for navigation."
        ),
        "btn_open_webapp": "üåê Open MERZOGAMES",
        "btn_profile": "üë§ Profile",
        "btn_info": "‚ÑπÔ∏è Information",
        "btn_referral": "üîó Referral Link",
        "btn_export_data": "üì• Export My Data",
        "btn_delete_account": "üóë Delete Account",
        "btn_language": "üåê Language",
        "profile_text": (
            "üë§ <b>YOUR PROFILE</b>\n\n"
            "üÜî Telegram ID: {telegram_id}\n"
            "üë§ Username: @{username}\n"
            "üì± Phone: {phone}\n"
            "üìÖ Registration: {registration_date}\n"
            "üåç Language: {language}\n"
            "üéñ Status: {status}\n\n"
            "{badges}"
        ),
        "info_text": (
            "‚ÑπÔ∏è <b>ABOUT MERZOGAMES</b>\n\n"
            "<b>What is it?</b>\n"
            "MERZOGAMES is entertainment platform for interactive games, tournaments and competitions.\n\n"
            "<b>Important:</b>\n"
            "‚Ä¢ All games are entertainment only\n"
            "‚Ä¢ Virtual currency has no monetary value\n"
            "‚Ä¢ Multi-accounting prohibited\n"
            "‚Ä¢ 18+ only\n\n"
            "<b>Contacts:</b>\n"
            "üë®‚Äçüíº Admin: @mrztn\n"
            "ü§ñ Bot: {bot_link}\n"
            "üåê WebApp: {webapp_link}\n\n"
            "<b>Useful commands:</b>\n"
            "/start - Main menu\n"
            "/profile - Profile\n"
            "/referral - Referral link\n"
            "/export_my_data - Export data\n"
            "/delete_account - Delete account\n"
            "/language - Change language"
        ),
        "referral_text": (
            "üîó <b>YOUR REFERRAL LINK</b>\n\n"
            "Invite friends to MERZOGAMES!\n\n"
            "Your link:\n"
            "<code>{referral_link}</code>\n\n"
            "üìä Stats:\n"
            "Invited: {referrals_count} people\n\n"
            "‚ö†Ô∏è Note: referral system is purely entertainment "
            "with no material payouts."
        ),
        "export_data_text": (
            "üì• <b>DATA EXPORT (GDPR)</b>\n\n"
            "According to your right to access personal data, "
            "we've prepared a file with all your data stored in our system.\n\n"
            "üìÑ File contains:\n"
            "‚Ä¢ Registration data\n"
            "‚Ä¢ Activity history\n"
            "‚Ä¢ Usage statistics\n"
            "‚Ä¢ Action logs (anonymized)\n\n"
            "File will be sent within a minute."
        ),
        "delete_account_confirm": (
            "üóë <b>DELETE ACCOUNT</b>\n\n"
            "‚ö†Ô∏è <b>WARNING!</b> This is irreversible.\n\n"
            "After deletion:\n"
            "‚ùå All your data will be deleted\n"
            "‚ùå All progress will be lost\n"
            "‚ùå Recovery impossible\n\n"
            "However, you'll have <b>7 days</b> to cancel deletion.\n"
            "During this time account will be frozen but data preserved.\n\n"
            "Are you sure you want to delete your account?"
        ),
        "btn_delete_confirm": "üóë Yes, delete forever",
        "btn_cancel": "‚ùå Cancel",
        "delete_account_scheduled": (
            "‚è≥ <b>ACCOUNT MARKED FOR DELETION</b>\n\n"
            "Your account will be deleted in 7 days.\n\n"
            "Until then you can cancel deletion by typing /cancel_deletion\n\n"
            "Final deletion date: {deletion_date}"
        ),
        "admin_new_user": (
            "üÜï <b>NEW USER</b>\n\n"
            "üë§ Profile: <a href='tg://user?id={telegram_id}'>link</a>\n"
            "üÜî ID: <code>{telegram_id}</code>\n"
            "üë§ Username: @{username}\n"
            "üì± Phone: <code>{phone}</code>\n"
            "üìÖ Date: {registration_date}\n"
            "üåç Language: {language}"
        ),
        "admin_duplicate_attempt": (
            "‚ö†Ô∏è <b>MULTI-ACCOUNT ATTEMPT!</b>\n\n"
            "User trying to register second account:\n\n"
            "üÜî New ID: <code>{new_id}</code>\n"
            "üì± Phone: <code>{phone}</code>\n"
            "üîó Existing ID: <code>{existing_id}</code>\n"
            "üë§ Username: @{username}"
        ),
        "duplicate_phone_error": (
            "‚õîÔ∏è <b>REGISTRATION ERROR</b>\n\n"
            "This phone number is already registered.\n\n"
            "According to rules, one user can have only one account.\n\n"
            "If you lost access to previous account, contact admin: @mrztn"
        ),
        "rate_limit_warning": (
            "‚ö†Ô∏è Too many commands. Wait {seconds} seconds."
        ),
        "flood_blocked": (
            "üö´ <b>ANTI-SPAM</b>\n\n"
            "Suspicious activity detected (flood).\n"
            "Your account temporarily blocked for {minutes} minutes.\n\n"
            "Please use bot reasonably."
        ),
        "language_select": "üåê –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Select language:",
        "btn_lang_ru": "üá∑üá∫ –†—É—Å—Å–∫–∏–π",
        "btn_lang_en": "üá¨üáß English",
        "language_changed": "‚úÖ Language changed to: {language}"
    }
}

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ú–û–î–ï–õ–ò –î–ê–ù–ù–´–•
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

@dataclass
class User:
    """–ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    telegram_id: int
    username: Optional[str]
    phone: Optional[str]
    language: str
    registration_date: datetime
    policy_accepted: bool = False
    terms_accepted: bool = False
    age_confirmed: bool = False
    is_blocked: bool = False
    is_admin: bool = False
    referred_by: Optional[int] = None
    deletion_scheduled: Optional[datetime] = None
    
    def to_dict(self) -> Dict[str, Any]:
        return asdict(self)

@dataclass
class LogEntry:
    """–ú–æ–¥–µ–ª—å –ª–æ–≥-–∑–∞–ø–∏—Å–∏"""
    user_id: int
    action: str
    details: Optional[str]
    timestamp: datetime
    
    def to_dict(self) -> Dict[str, Any]:
        return asdict(self)

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# FSM –°–û–°–¢–û–Ø–ù–ò–Ø
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

class RegistrationStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"""
    waiting_for_policy = State()
    waiting_for_terms = State()
    waiting_for_age = State()
    waiting_for_phone = State()

class AdminStates(StatesGroup):
    """–°–æ—Å—Ç–æ—è–Ω–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏"""
    waiting_for_broadcast_text = State()
    waiting_for_broadcast_target = State()
    waiting_for_user_search = State()

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# CALLBACK DATA
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

class PolicyCallback(CallbackData, prefix="policy"):
    """Callback –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫–∏"""
    action: str  # accept, decline, show

class TermsCallback(CallbackData, prefix="terms"):
    """Callback –¥–ª—è —É—Å–ª–æ–≤–∏–π"""
    action: str  # accept, decline, show

class AgeCallback(CallbackData, prefix="age"):
    """Callback –¥–ª—è –≤–æ–∑—Ä–∞—Å—Ç–∞"""
    action: str  # yes, no

class MainMenuCallback(CallbackData, prefix="menu"):
    """Callback –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é"""
    action: str  # profile, info, referral, export, delete, language

class AdminCallback(CallbackData, prefix="admin"):
    """Callback –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏"""
    action: str
    data: str = ""

class LanguageCallback(CallbackData, prefix="lang"):
    """Callback –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞"""
    code: str  # ru, en

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ë–ê–ó–ê –î–ê–ù–ù–´–•
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

class Database:
    """–ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö"""
    
    def __init__(self, db_path: str):
        self.db_path = db_path
        self.init_database()
    
    def get_connection(self) -> sqlite3.Connection:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î"""
        conn = sqlite3.connect(self.db_path)
        conn.row_factory = sqlite3.Row
        return conn
    
    def init_database(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        # –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS users (
                telegram_id INTEGER PRIMARY KEY,
                username TEXT,
                phone TEXT UNIQUE,
                phone_hash TEXT,
                language TEXT DEFAULT 'ru',
                registration_date TIMESTAMP,
                policy_accepted BOOLEAN DEFAULT 0,
                policy_accepted_date TIMESTAMP,
                terms_accepted BOOLEAN DEFAULT 0,
                terms_accepted_date TIMESTAMP,
                age_confirmed BOOLEAN DEFAULT 0,
                age_confirmed_date TIMESTAMP,
                is_blocked BOOLEAN DEFAULT 0,
                block_reason TEXT,
                block_date TIMESTAMP,
                is_admin BOOLEAN DEFAULT 0,
                referred_by INTEGER,
                deletion_scheduled TIMESTAMP,
                last_activity TIMESTAMP
            )
        """)
        
        # –¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS logs (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_id INTEGER,
                action TEXT,
                details TEXT,
                timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        """)
        
        # –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–π—Ç-–ª–∏–º–∏—Ç–æ–≤
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS rate_limits (
                user_id INTEGER PRIMARY KEY,
                command_count INTEGER DEFAULT 0,
                last_command_time TIMESTAMP,
                flood_strikes INTEGER DEFAULT 0,
                flood_blocked_until TIMESTAMP
            )
        """)
        
        # –¢–∞–±–ª–∏—Ü–∞ –±–µ–π–¥–∂–µ–π
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS badges (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_id INTEGER,
                badge_type TEXT,
                earned_date TIMESTAMP,
                UNIQUE(user_id, badge_type)
            )
        """)
        
        # –¢–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ WebApp
        cursor.execute("""
            CREATE TABLE IF NOT EXISTS webapp_stats (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                user_id INTEGER,
                opened_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        """)
        
        # –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
        cursor.execute("CREATE INDEX IF NOT EXISTS idx_phone_hash ON users(phone_hash)")
        cursor.execute("CREATE INDEX IF NOT EXISTS idx_logs_user_id ON logs(user_id)")
        cursor.execute("CREATE INDEX IF NOT EXISTS idx_logs_timestamp ON logs(timestamp)")
        
        conn.commit()
        conn.close()
        
        logger.info("‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞")
    
    def add_user(self, user: User) -> bool:
        """–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        try:
            conn = self.get_connection()
            cursor = conn.cursor()
            
            phone_hash = self._hash_phone(user.phone) if user.phone else None
            
            cursor.execute("""
                INSERT INTO users (
                    telegram_id, username, phone, phone_hash, language,
                    registration_date, policy_accepted, terms_accepted,
                    age_confirmed, is_admin, referred_by
                ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
            """, (
                user.telegram_id, user.username, user.phone, phone_hash,
                user.language, user.registration_date, user.policy_accepted,
                user.terms_accepted, user.age_confirmed, user.is_admin,
                user.referred_by
            ))
            
            conn.commit()
            conn.close()
            return True
        except sqlite3.IntegrityError:
            return False
    
    def get_user(self, telegram_id: int) -> Optional[User]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("SELECT * FROM users WHERE telegram_id = ?", (telegram_id,))
        row = cursor.fetchone()
        conn.close()
        
        if row:
            return User(
                telegram_id=row['telegram_id'],
                username=row['username'],
                phone=row['phone'],
                language=row['language'],
                registration_date=datetime.fromisoformat(row['registration_date']),
                policy_accepted=bool(row['policy_accepted']),
                terms_accepted=bool(row['terms_accepted']),
                age_confirmed=bool(row['age_confirmed']),
                is_blocked=bool(row['is_blocked']),
                is_admin=bool(row['is_admin']),
                referred_by=row['referred_by'],
                deletion_scheduled=datetime.fromisoformat(row['deletion_scheduled']) if row['deletion_scheduled'] else None
            )
        return None
    
    def update_user(self, telegram_id: int, **kwargs):
        """–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å
        set_clause = ", ".join([f"{key} = ?" for key in kwargs.keys()])
        values = list(kwargs.values())
        values.append(telegram_id)
        
        cursor.execute(f"UPDATE users SET {set_clause} WHERE telegram_id = ?", values)
        conn.commit()
        conn.close()
    
    def check_phone_exists(self, phone: str) -> Optional[int]:
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç telegram_id –≤–ª–∞–¥–µ–ª—å—Ü–∞)"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        phone_hash = self._hash_phone(phone)
        cursor.execute("SELECT telegram_id FROM users WHERE phone_hash = ?", (phone_hash,))
        row = cursor.fetchone()
        conn.close()
        
        return row['telegram_id'] if row else None
    
    def add_log(self, log: LogEntry):
        """–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("""
            INSERT INTO logs (user_id, action, details, timestamp)
            VALUES (?, ?, ?, ?)
        """, (log.user_id, log.action, log.details, log.timestamp))
        
        conn.commit()
        conn.close()
    
    def get_statistics(self) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        # –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        cursor.execute("SELECT COUNT(*) FROM users WHERE is_blocked = 0")
        total_users = cursor.fetchone()[0]
        
        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ–≥–æ–¥–Ω—è
        today = datetime.now(timezone.utc).date()
        cursor.execute("""
            SELECT COUNT(*) FROM users 
            WHERE DATE(registration_date) = ? AND is_blocked = 0
        """, (today.isoformat(),))
        today_users = cursor.fetchone()[0]
        
        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
        week_ago = datetime.now(timezone.utc) - timedelta(days=7)
        cursor.execute("""
            SELECT COUNT(*) FROM users 
            WHERE registration_date >= ? AND is_blocked = 0
        """, (week_ago.isoformat(),))
        week_users = cursor.fetchone()[0]
        
        conn.close()
        
        return {
            "total": total_users,
            "today": today_users,
            "week": week_users
        }
    
    def get_all_users(self) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("SELECT * FROM users WHERE is_blocked = 0")
        rows = cursor.fetchall()
        conn.close()
        
        return [dict(row) for row in rows]
    
    def check_rate_limit(self, user_id: int) -> Tuple[bool, int]:
        """
        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–π—Ç-–ª–∏–º–∏—Ç
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: (—Ä–∞–∑—Ä–µ—à–µ–Ω–æ, —Å–µ–∫—É–Ω–¥ –¥–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
        """
        conn = self.get_connection()
        cursor = conn.cursor()
        
        now = datetime.now(timezone.utc)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª—É–¥-–±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        cursor.execute("""
            SELECT flood_blocked_until FROM rate_limits WHERE user_id = ?
        """, (user_id,))
        row = cursor.fetchone()
        
        if row and row['flood_blocked_until']:
            blocked_until = datetime.fromisoformat(row['flood_blocked_until'])
            if now < blocked_until:
                seconds_left = int((blocked_until - now).total_seconds())
                conn.close()
                return False, seconds_left
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥
        cursor.execute("""
            SELECT command_count, last_command_time FROM rate_limits WHERE user_id = ?
        """, (user_id,))
        row = cursor.fetchone()
        
        if row:
            last_time = datetime.fromisoformat(row['last_command_time'])
            time_diff = (now - last_time).total_seconds()
            
            if time_diff < 60:  # –í –ø—Ä–µ–¥–µ–ª–∞—Ö –º–∏–Ω—É—Ç—ã
                count = row['command_count']
                if count >= 5:  # –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç
                    # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ–º —Ñ–ª—É–¥-—Å—Ç—Ä–∞–π–∫–∏
                    cursor.execute("""
                        UPDATE rate_limits 
                        SET flood_strikes = flood_strikes + 1
                        WHERE user_id = ?
                    """, (user_id,))
                    
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–π–∫–æ–≤
                    cursor.execute("SELECT flood_strikes FROM rate_limits WHERE user_id = ?", (user_id,))
                    strikes = cursor.fetchone()['flood_strikes']
                    
                    if strikes >= 3:  # –ë–ª–æ–∫–∏—Ä—É–µ–º –Ω–∞ —á–∞—Å
                        block_until = now + timedelta(hours=1)
                        cursor.execute("""
                            UPDATE rate_limits 
                            SET flood_blocked_until = ?, flood_strikes = 0
                            WHERE user_id = ?
                        """, (block_until.isoformat(), user_id))
                        conn.commit()
                        conn.close()
                        return False, 3600
                    
                    conn.commit()
                    conn.close()
                    return False, int(60 - time_diff)
                else:
                    # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ–º —Å—á—ë—Ç—á–∏–∫
                    cursor.execute("""
                        UPDATE rate_limits 
                        SET command_count = command_count + 1
                        WHERE user_id = ?
                    """, (user_id,))
            else:
                # –ü—Ä–æ—à–ª–∞ –º–∏–Ω—É—Ç–∞, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫
                cursor.execute("""
                    UPDATE rate_limits 
                    SET command_count = 1, last_command_time = ?
                    WHERE user_id = ?
                """, (now.isoformat(), user_id))
        else:
            # –ü–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
            cursor.execute("""
                INSERT INTO rate_limits (user_id, command_count, last_command_time)
                VALUES (?, 1, ?)
            """, (user_id, now.isoformat()))
        
        conn.commit()
        conn.close()
        return True, 0
    
    def add_badge(self, user_id: int, badge_type: str):
        """–î–æ–±–∞–≤–∏—Ç—å –±–µ–π–¥–∂ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
        try:
            conn = self.get_connection()
            cursor = conn.cursor()
            
            cursor.execute("""
                INSERT INTO badges (user_id, badge_type, earned_date)
                VALUES (?, ?, ?)
            """, (user_id, badge_type, datetime.now(timezone.utc).isoformat()))
            
            conn.commit()
            conn.close()
            return True
        except sqlite3.IntegrityError:
            return False  # –ë–µ–π–¥–∂ —É–∂–µ –µ—Å—Ç—å
    
    def get_user_badges(self, user_id: int) -> List[str]:
        """–ü–æ–ª—É—á–∏—Ç—å –±–µ–π–¥–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("SELECT badge_type FROM badges WHERE user_id = ?", (user_id,))
        rows = cursor.fetchall()
        conn.close()
        
        return [row['badge_type'] for row in rows]
    
    def get_referral_count(self, user_id: int) -> int:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("SELECT COUNT(*) FROM users WHERE referred_by = ?", (user_id,))
        count = cursor.fetchone()[0]
        conn.close()
        
        return count
    
    def log_webapp_open(self, user_id: int):
        """–ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ WebApp"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("""
            INSERT INTO webapp_stats (user_id, opened_date)
            VALUES (?, ?)
        """, (user_id, datetime.now(timezone.utc).isoformat()))
        
        conn.commit()
        conn.close()
    
    def get_webapp_opens(self, user_id: int) -> int:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç–∏–π WebApp"""
        conn = self.get_connection()
        cursor = conn.cursor()
        
        cursor.execute("SELECT COUNT(*) FROM webapp_stats WHERE user_id = ?", (user_id,))
        count = cursor.fetchone()[0]
        conn.close()
        
        return count
    
    @staticmethod
    def _hash_phone(phone: str) -> str:
        """–•–µ—à–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
        return hashlib.sha256(phone.encode()).hexdigest()

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ö–õ–ê–í–ò–ê–¢–£–†–´
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

def get_start_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_policy"],
        callback_data=PolicyCallback(action="show")
    )
    builder.button(
        text=TEXTS[lang]["btn_terms"],
        callback_data=TermsCallback(action="show")
    )
    builder.adjust(1)
    return builder.as_markup()

def get_policy_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–ª–∏—Ç–∏–∫–∏"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_accept"],
        callback_data=PolicyCallback(action="accept")
    )
    builder.button(
        text=TEXTS[lang]["btn_decline"],
        callback_data=PolicyCallback(action="decline")
    )
    builder.button(
        text=TEXTS[lang]["btn_back"],
        callback_data=PolicyCallback(action="back")
    )
    builder.adjust(2, 1)
    return builder.as_markup()

def get_terms_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —É—Å–ª–æ–≤–∏–π"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_accept"],
        callback_data=TermsCallback(action="accept")
    )
    builder.button(
        text=TEXTS[lang]["btn_decline"],
        callback_data=TermsCallback(action="decline")
    )
    builder.button(
        text=TEXTS[lang]["btn_back"],
        callback_data=TermsCallback(action="back")
    )
    builder.adjust(2, 1)
    return builder.as_markup()

def get_age_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_age_yes"],
        callback_data=AgeCallback(action="yes")
    )
    builder.button(
        text=TEXTS[lang]["btn_age_no"],
        callback_data=AgeCallback(action="no")
    )
    builder.adjust(1)
    return builder.as_markup()

def get_phone_keyboard(lang: str = "ru") -> ReplyKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
    builder = ReplyKeyboardBuilder()
    builder.button(text=TEXTS[lang]["btn_send_phone"], request_contact=True)
    builder.adjust(1)
    return builder.as_markup(resize_keyboard=True, one_time_keyboard=True)

def get_main_menu_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_open_webapp"],
        web_app=WebAppInfo(url=WEBAPP_LINK)
    )
    builder.button(
        text=TEXTS[lang]["btn_profile"],
        callback_data=MainMenuCallback(action="profile")
    )
    builder.button(
        text=TEXTS[lang]["btn_info"],
        callback_data=MainMenuCallback(action="info")
    )
    builder.button(
        text=TEXTS[lang]["btn_referral"],
        callback_data=MainMenuCallback(action="referral")
    )
    builder.button(
        text=TEXTS[lang]["btn_language"],
        callback_data=MainMenuCallback(action="language")
    )
    builder.adjust(1, 2, 2)
    return builder.as_markup()

def get_language_keyboard() -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text="üá∑üá∫ –†—É—Å—Å–∫–∏–π",
        callback_data=LanguageCallback(code="ru")
    )
    builder.button(
        text="üá¨üáß English",
        callback_data=LanguageCallback(code="en")
    )
    builder.adjust(2)
    return builder.as_markup()

def get_admin_keyboard() -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text="üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
        callback_data=AdminCallback(action="stats")
    )
    builder.button(
        text="‚úâÔ∏è –†–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º",
        callback_data=AdminCallback(action="broadcast_all")
    )
    builder.button(
        text="üîç –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
        callback_data=AdminCallback(action="search")
    )
    builder.button(
        text="üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö",
        callback_data=AdminCallback(action="export")
    )
    builder.adjust(2, 2)
    return builder.as_markup()

def get_delete_confirm_keyboard(lang: str = "ru") -> InlineKeyboardMarkup:
    """–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è"""
    builder = InlineKeyboardBuilder()
    builder.button(
        text=TEXTS[lang]["btn_delete_confirm"],
        callback_data=MainMenuCallback(action="delete_confirm")
    )
    builder.button(
        text=TEXTS[lang]["btn_cancel"],
        callback_data=MainMenuCallback(action="delete_cancel")
    )
    builder.adjust(1)
    return builder.as_markup()

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –•–≠–ù–î–õ–ï–†–´
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
bot = Bot(token=BOT_TOKEN)
dp = Dispatcher(storage=MemoryStorage())
db = Database(DB_PATH)
router = Router()

async def check_rate_limit_middleware(handler, event, data):
    """Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–π—Ç-–ª–∏–º–∏—Ç–æ–≤"""
    if isinstance(event, Message):
        user_id = event.from_user.id
        allowed, seconds = db.check_rate_limit(user_id)
        
        if not allowed:
            user = db.get_user(user_id)
            lang = user.language if user else "ru"
            
            if seconds > 3600:  # –§–ª—É–¥-–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
                minutes = seconds // 60
                await event.answer(
                    TEXTS[lang]["flood_blocked"].format(minutes=minutes)
                )
            else:  # –û–±—ã—á–Ω–æ–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
                await event.answer(
                    TEXTS[lang]["rate_limit_warning"].format(seconds=seconds)
                )
            return
    
    return await handler(event, data)

@router.message(Command("start"))
async def cmd_start(message: Message, state: FSMContext, command: Command = None):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    user_id = message.from_user.id
    username = message.from_user.username
    user_lang = message.from_user.language_code
    lang = "ru" if user_lang and user_lang.startswith("ru") else "en"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    user = db.get_user(user_id)
    
    if user:
        # –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
        db.update_user(
            user_id,
            last_activity=datetime.now(timezone.utc).isoformat()
        )
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        if user.is_blocked:
            await message.answer("üö´ –í–∞—à –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.")
            return
        
        # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        lang = user.language
        await message.answer(
            TEXTS[lang]["registration_success"],
            reply_markup=get_main_menu_keyboard(lang)
        )
        
        # –õ–æ–≥–∏—Ä—É–µ–º
        db.add_log(LogEntry(
            user_id=user_id,
            action="start_existing",
            details=None,
            timestamp=datetime.now(timezone.utc)
        ))
    else:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
        referred_by = None
        if command and command.args:
            try:
                referred_by = int(command.args)
                if not db.get_user(referred_by):
                    referred_by = None
            except ValueError:
                pass
        
        # –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Äî —Å–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å
        temp_user = User(
            telegram_id=user_id,
            username=username,
            phone=None,
            language=lang,
            registration_date=datetime.now(timezone.utc),
            referred_by=referred_by
        )
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ FSM
        await state.update_data(user=temp_user.to_dict())
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        await message.answer(
            TEXTS[lang]["start_welcome"],
            reply_markup=get_start_keyboard(lang)
        )
        
        # –õ–æ–≥–∏—Ä—É–µ–º
        db.add_log(LogEntry(
            user_id=user_id,
            action="start_new",
            details=f"referred_by={referred_by}",
            timestamp=datetime.now(timezone.utc)
        ))

@router.callback_query(PolicyCallback.filter(F.action == "show"))
async def show_policy(callback: CallbackQuery, callback_data: PolicyCallback, state: FSMContext):
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏"""
    user_id = callback.from_user.id
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start", show_alert=True)
        return
    
    lang = user_dict.get("language", "ru")
    
    # –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏ (Telegram –ª–∏–º–∏—Ç 4096 —Å–∏–º–≤–æ–ª–æ–≤)
    policy_text = TEXTS[lang]["policy_title"] + TEXTS[lang]["policy_text"]
    
    if len(policy_text) > 4096:
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–∞—Å—Ç—è–º–∏
        parts = [policy_text[i:i+4000] for i in range(0, len(policy_text), 4000)]
        for i, part in enumerate(parts):
            if i == len(parts) - 1:  # –ü–æ—Å–ª–µ–¥–Ω—è—è —á–∞—Å—Ç—å ‚Äî —Å –∫–Ω–æ–ø–∫–∞–º–∏
                await callback.message.answer(
                    part,
                    reply_markup=get_policy_keyboard(lang)
                )
            else:
                await callback.message.answer(part)
        await callback.message.delete()
    else:
        await callback.message.edit_text(
            policy_text,
            reply_markup=get_policy_keyboard(lang)
        )
    
    await callback.answer()

@router.callback_query(PolicyCallback.filter(F.action == "accept"))
async def accept_policy(callback: CallbackQuery, callback_data: PolicyCallback, state: FSMContext):
    """–ü—Ä–∏–Ω—è—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É"""
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start", show_alert=True)
        return
    
    lang = user_dict.get("language", "ru")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
    user_dict["policy_accepted"] = True
    await state.update_data(user=user_dict)
    
    await callback.message.edit_text(
        TEXTS[lang]["policy_accepted"] + "\n\n" + TEXTS[lang]["start_welcome"],
        reply_markup=get_start_keyboard(lang)
    )
    await callback.answer()

@router.callback_query(PolicyCallback.filter(F.action == "decline"))
async def decline_policy(callback: CallbackQuery, callback_data: PolicyCallback, state: FSMContext):
    """–û—Ç–∫–∞–∑ –æ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏"""
    data = await state.get_data()
    user_dict = data.get("user")
    lang = user_dict.get("language", "ru") if user_dict else "ru"
    
    await callback.message.edit_text(TEXTS[lang]["declined_message"])
    await state.clear()
    await callback.answer()

@router.callback_query(PolicyCallback.filter(F.action == "back"))
async def policy_back(callback: CallbackQuery, callback_data: PolicyCallback, state: FSMContext):
    """–ù–∞–∑–∞–¥ –∏–∑ –ø–æ–ª–∏—Ç–∏–∫–∏"""
    data = await state.get_data()
    user_dict = data.get("user")
    lang = user_dict.get("language", "ru") if user_dict else "ru"
    
    await callback.message.edit_text(
        TEXTS[lang]["start_welcome"],
        reply_markup=get_start_keyboard(lang)
    )
    await callback.answer()

@router.callback_query(TermsCallback.filter(F.action == "show"))
async def show_terms(callback: CallbackQuery, callback_data: TermsCallback, state: FSMContext):
    """–ü–æ–∫–∞–∑–∞—Ç—å —É—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"""
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start", show_alert=True)
        return
    
    lang = user_dict.get("language", "ru")
    
    # –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —á–∞—Å—Ç–∏
    terms_text = TEXTS[lang]["terms_title"] + TEXTS[lang]["terms_text"]
    
    if len(terms_text) > 4096:
        parts = [terms_text[i:i+4000] for i in range(0, len(terms_text), 4000)]
        for i, part in enumerate(parts):
            if i == len(parts) - 1:
                await callback.message.answer(
                    part,
                    reply_markup=get_terms_keyboard(lang)
                )
            else:
                await callback.message.answer(part)
        await callback.message.delete()
    else:
        await callback.message.edit_text(
            terms_text,
            reply_markup=get_terms_keyboard(lang)
        )
    
    await callback.answer()

@router.callback_query(TermsCallback.filter(F.action == "accept"))
async def accept_terms(callback: CallbackQuery, callback_data: TermsCallback, state: FSMContext):
    """–ü—Ä–∏–Ω—è—Ç—å —É—Å–ª–æ–≤–∏—è"""
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start", show_alert=True)
        return
    
    lang = user_dict.get("language", "ru")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
    user_dict["terms_accepted"] = True
    await state.update_data(user=user_dict)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–∏–Ω—è—Ç—ã –ª–∏ –æ–±–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    if user_dict.get("policy_accepted") and user_dict.get("terms_accepted"):
        # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é –≤–æ–∑—Ä–∞—Å—Ç–∞
        await callback.message.edit_text(
            TEXTS[lang]["age_verification"],
            reply_markup=get_age_keyboard(lang)
        )
    else:
        await callback.message.edit_text(
            TEXTS[lang]["terms_accepted"] + "\n\n" + TEXTS[lang]["start_welcome"],
            reply_markup=get_start_keyboard(lang)
        )
    
    await callback.answer()

@router.callback_query(TermsCallback.filter(F.action == "decline"))
async def decline_terms(callback: CallbackQuery, callback_data: TermsCallback, state: FSMContext):
    """–û—Ç–∫–∞–∑ –æ—Ç —É—Å–ª–æ–≤–∏–π"""
    data = await state.get_data()
    user_dict = data.get("user")
    lang = user_dict.get("language", "ru") if user_dict else "ru"
    
    await callback.message.edit_text(TEXTS[lang]["declined_message"])
    await state.clear()
    await callback.answer()

@router.callback_query(TermsCallback.filter(F.action == "back"))
async def terms_back(callback: CallbackQuery, callback_data: TermsCallback, state: FSMContext):
    """–ù–∞–∑–∞–¥ –∏–∑ —É—Å–ª–æ–≤–∏–π"""
    data = await state.get_data()
    user_dict = data.get("user")
    lang = user_dict.get("language", "ru") if user_dict else "ru"
    
    await callback.message.edit_text(
        TEXTS[lang]["start_welcome"],
        reply_markup=get_start_keyboard(lang)
    )
    await callback.answer()

@router.callback_query(AgeCallback.filter(F.action == "yes"))
async def age_confirmed(callback: CallbackQuery, callback_data: AgeCallback, state: FSMContext):
    """–í–æ–∑—Ä–∞—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω"""
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start", show_alert=True)
        return
    
    lang = user_dict.get("language", "ru")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
    user_dict["age_confirmed"] = True
    await state.update_data(user=user_dict)
    
    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    await callback.message.edit_text(TEXTS[lang]["age_confirmed"])
    await callback.message.answer(
        TEXTS[lang]["registration_phone"],
        reply_markup=get_phone_keyboard(lang)
    )
    await state.set_state(RegistrationStates.waiting_for_phone)
    await callback.answer()

@router.callback_query(AgeCallback.filter(F.action == "no"))
async def age_declined(callback: CallbackQuery, callback_data: AgeCallback, state: FSMContext):
    """–í–æ–∑—Ä–∞—Å—Ç –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω"""
    data = await state.get_data()
    user_dict = data.get("user")
    lang = user_dict.get("language", "ru") if user_dict else "ru"
    
    user_id = callback.from_user.id
    
    # –ë–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # (—Å–æ–∑–¥–∞—ë–º –∑–∞–ø–∏—Å—å –≤ –ë–î —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π)
    blocked_user = User(
        telegram_id=user_id,
        username=callback.from_user.username,
        phone=None,
        language=lang,
        registration_date=datetime.now(timezone.utc),
        is_blocked=True
    )
    db.add_user(blocked_user)
    db.update_user(
        user_id,
        is_blocked=True,
        block_reason="age_under_18",
        block_date=datetime.now(timezone.utc).isoformat()
    )
    
    await callback.message.edit_text(TEXTS[lang]["age_declined"])
    await state.clear()
    await callback.answer()

@router.message(RegistrationStates.waiting_for_phone, F.contact)
async def phone_received(message: Message, state: FSMContext):
    """–ü–æ–ª—É—á–µ–Ω –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"""
    user_id = message.from_user.id
    contact = message.contact
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–∞–∫—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    if contact.user_id != user_id:
        await message.answer("‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.")
        return
    
    phone = contact.phone_number
    data = await state.get_data()
    user_dict = data.get("user")
    
    if not user_dict:
        await message.answer("‚ùå –û—à–∏–±–∫–∞: –Ω–∞—á–Ω–∏—Ç–µ —Å /start")
        return
    
    lang = user_dict.get("language", "ru")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ —ç—Ç–æ—Ç –Ω–æ–º–µ—Ä
    existing_id = db.check_phone_exists(phone)
    if existing_id and existing_id != user_id:
        # –ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç!
        await message.answer(
            TEXTS[lang]["duplicate_phone_error"],
            reply_markup=ReplyKeyboardRemove()
        )
        
        # –£–≤–µ–¥–æ–º–ª—è–µ–º –∞–¥–º–∏–Ω–∞
        await bot.send_message(
            ADMIN_ID,
            TEXTS[lang]["admin_duplicate_attempt"].format(
                new_id=user_id,
                phone=phone,
                existing_id=existing_id,
                username=message.from_user.username or "N/A"
            )
        )
        
        # –õ–æ–≥–∏—Ä—É–µ–º
        db.add_log(LogEntry(
            user_id=user_id,
            action="duplicate_phone_attempt",
            details=f"phone={phone}, existing_id={existing_id}",
            timestamp=datetime.now(timezone.utc)
        ))
        
        await state.clear()
        return
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_dict["phone"] = phone
    
    user = User(
        telegram_id=user_dict["telegram_id"],
        username=user_dict.get("username"),
        phone=phone,
        language=lang,
        registration_date=datetime.fromisoformat(user_dict["registration_date"]),
        policy_accepted=True,
        terms_accepted=True,
        age_confirmed=True,
        is_admin=(user_id == ADMIN_ID),
        referred_by=user_dict.get("referred_by")
    )
    
    success = db.add_user(user)
    
    if success:
        # –û–±–Ω–æ–≤–ª—è–µ–º timestamps
        db.update_user(
            user_id,
            policy_accepted_date=datetime.now(timezone.utc).isoformat(),
            terms_accepted_date=datetime.now(timezone.utc).isoformat(),
            age_confirmed_date=datetime.now(timezone.utc).isoformat()
        )
        
        # –ë–µ–π–¥–∂ "–ü–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü" (–µ—Å–ª–∏ –≤—Ö–æ–¥–∏—Ç –≤ –ø–µ—Ä–≤—ã–µ 100)
        stats = db.get_statistics()
        if stats["total"] <= 100:
            db.add_badge(user_id, "pioneer")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        await message.answer(
            TEXTS[lang]["registration_success"],
            reply_markup=ReplyKeyboardRemove()
        )
        await message.answer(
            "üéÆ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
            reply_markup=get_main_menu_keyboard(lang)
        )
        
        # –£–≤–µ–¥–æ–º–ª—è–µ–º –∞–¥–º–∏–Ω–∞
        await bot.send_message(
            ADMIN_ID,
            TEXTS[lang]["admin_new_user"].format(
                telegram_id=user_id,
                username=user.username or "N/A",
                phone=phone,
                registration_date=user.registration_date.strftime("%Y-%m-%d %H:%M:%S UTC"),
                language=lang
            )
        )
        
        # –õ–æ–≥–∏—Ä—É–µ–º
        db.add_log(LogEntry(
            user_id=user_id,
            action="registration_complete",
            details=f"phone={phone}",
            timestamp=datetime.now(timezone.utc)
        ))
        
        await state.clear()
    else:
        await message.answer("‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

@router.callback_query(MainMenuCallback.filter(F.action == "profile"))
async def show_profile(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å"""
    user_id = callback.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω", show_alert=True)
        return
    
    lang = user.language
    
    # –ü–æ–ª—É—á–∞–µ–º –±–µ–π–¥–∂–∏
    badges = db.get_user_badges(user_id)
    badge_emojis = {
        "pioneer": "üåü –ü–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü",
        "active": "üéØ –ê–∫—Ç–∏–≤–∏—Å—Ç",
        "referrer": "ü§ù –î—Ä—É–≥ –ø—Ä–æ–µ–∫—Ç–∞"
    }
    badges_text = "\n".join([f"{badge_emojis.get(b, b)}" for b in badges]) if badges else "–ü–æ–∫–∞ –Ω–µ—Ç –±–µ–π–¥–∂–µ–π"
    
    # –°—Ç–∞—Ç—É—Å
    if user.is_admin:
        status = "üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
    elif user.is_blocked:
        status = "üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
    else:
        status = "‚úÖ –ê–∫—Ç–∏–≤–µ–Ω"
    
    profile_text = TEXTS[lang]["profile_text"].format(
        telegram_id=user.telegram_id,
        username=user.username or "N/A",
        phone=user.phone or "N/A",
        registration_date=user.registration_date.strftime("%Y-%m-%d %H:%M"),
        language="üá∑üá∫ –†—É—Å—Å–∫–∏–π" if lang == "ru" else "üá¨üáß English",
        status=status,
        badges=badges_text
    )
    
    await callback.message.answer(profile_text)
    await callback.answer()

@router.callback_query(MainMenuCallback.filter(F.action == "info"))
async def show_info(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"""
    user_id = callback.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω", show_alert=True)
        return
    
    lang = user.language
    
    info_text = TEXTS[lang]["info_text"].format(
        bot_link=BOT_LINK,
        webapp_link=WEBAPP_LINK
    )
    
    await callback.message.answer(info_text)
    await callback.answer()

@router.callback_query(MainMenuCallback.filter(F.action == "referral"))
async def show_referral(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É"""
    user_id = callback.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω", show_alert=True)
        return
    
    lang = user.language
    
    referral_link = f"{BOT_LINK}?start={user_id}"
    referrals_count = db.get_referral_count(user_id)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–µ–π–¥–∂–∏
    if referrals_count >= 5:
        db.add_badge(user_id, "referrer")
    
    referral_text = TEXTS[lang]["referral_text"].format(
        referral_link=referral_link,
        referrals_count=referrals_count
    )
    
    await callback.message.answer(referral_text)
    await callback.answer()

@router.callback_query(MainMenuCallback.filter(F.action == "language"))
async def show_language_selector(callback: CallbackQuery):
    """–ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±–æ—Ä —è–∑—ã–∫–∞"""
    await callback.message.answer(
        "üåê –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Select language:",
        reply_markup=get_language_keyboard()
    )
    await callback.answer()

@router.callback_query(LanguageCallback.filter())
async def change_language(callback: CallbackQuery, callback_data: LanguageCallback):
    """–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫"""
    user_id = callback.from_user.id
    new_lang = callback_data.code
    
    db.update_user(user_id, language=new_lang)
    
    await callback.message.edit_text(
        TEXTS[new_lang]["language_changed"].format(
            language="üá∑üá∫ –†—É—Å—Å–∫–∏–π" if new_lang == "ru" else "üá¨üáß English"
        )
    )
    await callback.answer()
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –º–µ–Ω—é
    await callback.message.answer(
        "üéÆ " + ("–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:" if new_lang == "ru" else "Main menu:"),
        reply_markup=get_main_menu_keyboard(new_lang)
    )

@router.message(Command("profile"))
async def cmd_profile(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /profile"""
    user_id = message.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await message.answer("‚ùå –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞–ø–∏—à–∏—Ç–µ /start")
        return
    
    lang = user.language
    
    badges = db.get_user_badges(user_id)
    badge_emojis = {
        "pioneer": "üåü –ü–µ—Ä–≤–æ–ø—Ä–æ—Ö–æ–¥–µ—Ü",
        "active": "üéØ –ê–∫—Ç–∏–≤–∏—Å—Ç",
        "referrer": "ü§ù –î—Ä—É–≥ –ø—Ä–æ–µ–∫—Ç–∞"
    }
    badges_text = "\n".join([f"{badge_emojis.get(b, b)}" for b in badges]) if badges else ("–ü–æ–∫–∞ –Ω–µ—Ç –±–µ–π–¥–∂–µ–π" if lang == "ru" else "No badges yet")
    
    status = "üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä" if user.is_admin else ("‚úÖ –ê–∫—Ç–∏–≤–µ–Ω" if not user.is_blocked else "üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω")
    
    profile_text = TEXTS[lang]["profile_text"].format(
        telegram_id=user.telegram_id,
        username=user.username or "N/A",
        phone=user.phone or "N/A",
        registration_date=user.registration_date.strftime("%Y-%m-%d %H:%M"),
        language="üá∑üá∫ –†—É—Å—Å–∫–∏–π" if lang == "ru" else "üá¨üáß English",
        status=status,
        badges=badges_text
    )
    
    await message.answer(profile_text)

@router.message(Command("referral"))
async def cmd_referral(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /referral"""
    user_id = message.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await message.answer("‚ùå –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞–ø–∏—à–∏—Ç–µ /start")
        return
    
    lang = user.language
    
    referral_link = f"{BOT_LINK}?start={user_id}"
    referrals_count = db.get_referral_count(user_id)
    
    referral_text = TEXTS[lang]["referral_text"].format(
        referral_link=referral_link,
        referrals_count=referrals_count
    )
    
    await message.answer(referral_text)

@router.message(Command("export_my_data"))
async def cmd_export_data(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /export_my_data"""
    user_id = message.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await message.answer("‚ùå –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞–ø–∏—à–∏—Ç–µ /start")
        return
    
    lang = user.language
    
    await message.answer(TEXTS[lang]["export_data_text"])
    
    # –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    user_data = {
        "telegram_id": user.telegram_id,
        "username": user.username,
        "phone": user.phone,
        "language": user.language,
        "registration_date": user.registration_date.isoformat(),
        "policy_accepted": user.policy_accepted,
        "terms_accepted": user.terms_accepted,
        "age_confirmed": user.age_confirmed,
        "is_blocked": user.is_blocked,
        "referred_by": user.referred_by,
        "referrals_count": db.get_referral_count(user_id),
        "badges": db.get_user_badges(user_id),
        "webapp_opens": db.get_webapp_opens(user_id)
    }
    
    # –°–æ–∑–¥–∞—ë–º JSON
    json_data = json.dumps(user_data, indent=2, ensure_ascii=False)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª
    from io import BytesIO
    file = BytesIO(json_data.encode('utf-8'))
    file.name = f"user_data_{user_id}.json"
    
    from aiogram.types import BufferedInputFile
    document = BufferedInputFile(file.read(), filename=file.name)
    
    await message.answer_document(document)
    
    # –õ–æ–≥–∏—Ä—É–µ–º
    db.add_log(LogEntry(
        user_id=user_id,
        action="export_data",
        details=None,
        timestamp=datetime.now(timezone.utc)
    ))

@router.message(Command("delete_account"))
async def cmd_delete_account(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /delete_account"""
    user_id = message.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await message.answer("‚ùå –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞–ø–∏—à–∏—Ç–µ /start")
        return
    
    lang = user.language
    
    await message.answer(
        TEXTS[lang]["delete_account_confirm"],
        reply_markup=get_delete_confirm_keyboard(lang)
    )

@router.callback_query(MainMenuCallback.filter(F.action == "delete_confirm"))
async def delete_account_confirmed(callback: CallbackQuery):
    """–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞"""
    user_id = callback.from_user.id
    user = db.get_user(user_id)
    
    if not user:
        await callback.answer("‚ùå –û—à–∏–±–∫–∞", show_alert=True)
        return
    
    lang = user.language
    
    # –ü–ª–∞–Ω–∏—Ä—É–µ–º —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
    deletion_date = datetime.now(timezone.utc) + timedelta(days=7)
    db.update_user(
        user_id,
        deletion_scheduled=deletion_date.isoformat(),
        is_blocked=True,
        block_reason="deletion_scheduled"
    )
    
    await callback.message.edit_text(
        TEXTS[lang]["delete_account_scheduled"].format(
            deletion_date=deletion_date.strftime("%Y-%m-%d %H:%M UTC")
        )
    )
    await callback.answer()
    
    # –õ–æ–≥–∏—Ä—É–µ–º
    db.add_log(LogEntry(
        user_id=user_id,
        action="deletion_scheduled",
        details=f"date={deletion_date.isoformat()}",
        timestamp=datetime.now(timezone.utc)
    ))

@router.callback_query(MainMenuCallback.filter(F.action == "delete_cancel"))
async def delete_account_cancelled(callback: CallbackQuery):
    """–û—Ç–º–µ–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è"""
    await callback.message.edit_text("‚úÖ –û—Ç–º–µ–Ω–µ–Ω–æ.")
    await callback.answer()

@router.message(Command("language"))
async def cmd_language(message: Message):
    """–ö–æ–º–∞–Ω–¥–∞ /language"""
    await message.answer(
        "üåê –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Select language:",
        reply_markup=get_language_keyboard()
    )

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

@router.message(Command("admin"))
async def cmd_admin(message: Message):
    """–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"""
    user_id = message.from_user.id
    
    if user_id != ADMIN_ID:
        await message.answer("üö´ –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞.")
        return
    
    await message.answer(
        "üëë <b>–ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨</b>\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=get_admin_keyboard()
    )

@router.callback_query(AdminCallback.filter(F.action == "stats"))
async def admin_stats(callback: CallbackQuery):
    """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"""
    if callback.from_user.id != ADMIN_ID:
        await callback.answer("üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω", show_alert=True)
        return
    
    stats = db.get_statistics()
    
    stats_text = (
        "üìà <b>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</b>\n\n"
        f"üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {stats['total']}\n"
        f"üìÖ –°–µ–≥–æ–¥–Ω—è: {stats['today']}\n"
        f"üìÜ –ó–∞ –Ω–µ–¥–µ–ª—é: {stats['week']}"
    )
    
    await callback.message.answer(stats_text)
    await callback.answer()

@router.callback_query(AdminCallback.filter(F.action == "broadcast_all"))
async def admin_broadcast_start(callback: CallbackQuery, state: FSMContext):
    """–ù–∞—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É"""
    if callback.from_user.id != ADMIN_ID:
        await callback.answer("üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω", show_alert=True)
        return
    
    await callback.message.answer(
        "‚úâÔ∏è <b>–†–ê–°–°–´–õ–ö–ê</b>\n\n–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:"
    )
    await state.set_state(AdminStates.waiting_for_broadcast_text)
    await callback.answer()

@router.message(AdminStates.waiting_for_broadcast_text)
async def admin_broadcast_execute(message: Message, state: FSMContext):
    """–í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É"""
    if message.from_user.id != ADMIN_ID:
        return
    
    text = message.text
    users = db.get_all_users()
    
    success_count = 0
    fail_count = 0
    
    progress_message = await message.answer(f"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞: 0/{len(users)}")
    
    for i, user_dict in enumerate(users):
        try:
            await bot.send_message(user_dict['telegram_id'], text)
            success_count += 1
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é {user_dict['telegram_id']}: {e}")
            fail_count += 1
        
        # –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫–∞–∂–¥—ã–µ 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        if (i + 1) % 10 == 0 or (i + 1) == len(users):
            await progress_message.edit_text(
                f"üì§ –û—Ç–ø—Ä–∞–≤–∫–∞: {i + 1}/{len(users)}"
            )
        
        # –ü–∞—É–∑–∞, —á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç—ã
        await asyncio.sleep(0.05)
    
    await message.answer(
        f"‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!\n\n"
        f"–£—Å–ø–µ—à–Ω–æ: {success_count}\n"
        f"–û—à–∏–±–æ–∫: {fail_count}"
    )
    
    # –õ–æ–≥–∏—Ä—É–µ–º
    db.add_log(LogEntry(
        user_id=message.from_user.id,
        action="broadcast",
        details=f"success={success_count}, fail={fail_count}",
        timestamp=datetime.now(timezone.utc)
    ))
    
    await state.clear()

@router.callback_query(AdminCallback.filter(F.action == "export"))
async def admin_export(callback: CallbackQuery):
    """–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö"""
    if callback.from_user.id != ADMIN_ID:
        await callback.answer("üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω", show_alert=True)
        return
    
    await callback.message.answer("üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é –¥–∞–Ω–Ω—ã–µ...")
    
    users = db.get_all_users()
    
    # –°–æ–∑–¥–∞—ë–º CSV
    import csv
    from io import StringIO
    
    output = StringIO()
    writer = csv.DictWriter(output, fieldnames=users[0].keys())
    writer.writeheader()
    writer.writerows(users)
    
    csv_data = output.getvalue()
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª
    from io import BytesIO
    file = BytesIO(csv_data.encode('utf-8'))
    file.name = f"users_export_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv"
    
    from aiogram.types import BufferedInputFile
    document = BufferedInputFile(file.read(), filename=file.name)
    
    await callback.message.answer_document(document)
    await callback.answer()
    
    # –õ–æ–≥–∏—Ä—É–µ–º
    db.add_log(LogEntry(
        user_id=callback.from_user.id,
        action="admin_export",
        details=f"users_count={len(users)}",
        timestamp=datetime.now(timezone.utc)
    ))

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# INLINE MODE
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

@router.inline_query()
async def inline_handler(inline_query: InlineQuery):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ inline-–∑–∞–ø—Ä–æ—Å–æ–≤"""
    query = inline_query.query.lower()
    
    if not query or "–∏–≥—Ä–∞" in query or "game" in query:
        result = InlineQueryResultArticle(
            id="merzogames",
            title="üéÆ MERZOGAMES",
            description="–†–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞",
            input_message_content=InputTextMessageContent(
                message_text=(
                    "üéÆ <b>MERZOGAMES</b>\n\n"
                    "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ!\n\n"
                    "üéØ –ò–≥—Ä—ã\nüèÜ –¢—É—Ä–Ω–∏—Ä—ã\nüë• –°–æ–æ–±—â–µ—Å—Ç–≤–æ\n\n"
                    "‚ö†Ô∏è –í—Å–µ –∏–≥—Ä—ã –Ω–æ—Å—è—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.\n\n"
                    f"–ù–∞—á–∞—Ç—å: {BOT_LINK}"
                ),
                parse_mode="HTML"
            ),
            thumbnail_url="https://via.placeholder.com/150?text=MERZOGAMES"
        )
        
        await inline_query.answer([result], cache_time=300)

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# –ó–ê–ü–£–°–ö
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

async def on_startup():
    """–î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ"""
    logger.info("üöÄ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    await bot.send_message(
        ADMIN_ID,
        "ü§ñ <b>–ë–û–¢ –ó–ê–ü–£–©–ï–ù</b>\n\nMERZOGAMES Bot —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."
    )

async def on_shutdown():
    """–î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ"""
    logger.info("üõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.")
    await bot.send_message(
        ADMIN_ID,
        "ü§ñ <b>–ë–û–¢ –û–°–¢–ê–ù–û–í–õ–ï–ù</b>"
    )

async def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ä–æ—É—Ç–µ—Ä
    dp.include_router(router)
    
    # –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º middleware
    dp.message.middleware(check_rate_limit_middleware)
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º
    dp.startup.register(on_startup)
    dp.shutdown.register(on_shutdown)
    
    await dp.start_polling(bot)

if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        logger.info("‚ö†Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ Ctrl+C")